#!/bin/sh
set -e

#--------------------------------------------------------------------------------------------------
# Settings
#--------------------------------------------------------------------------------------------------

ffmpeg="$PWD/../ffmpeg/bin/ffmpeg"

#--------------------------------------------------------------------------------------------------
# Syntax
#--------------------------------------------------------------------------------------------------

if [ $# != 2 -a $# != 3 ]; then

    echo "Usage: convert <input> <output> [option]"
    echo ""
    echo "examples:"
    echo "    convert input.png output.jpg \"q:v 2\""
    echo "    convert input.png output.webp \"-lossless 1\""

    exit 1
fi

#--------------------------------------------------------------------------------------------------
# Run
#--------------------------------------------------------------------------------------------------

if [ $# = 2 ]; then

    "$ffmpeg" -y -i "$1" "$2"
else
    "$ffmpeg" -y -i "$1" $3 "$2"
fi
